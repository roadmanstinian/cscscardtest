<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Interactive Quiz</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      background: #f9f9f9;
    }
    h1 {
      text-align: center;
    }
    .question-container {
      border: 1px solid #ccc;
      padding: 15px;
      margin-bottom: 20px;
      background: #fff;
    }
    .question-title {
      font-weight: bold;
      margin-bottom: 10px;
    }
    .options button {
      display: block;
      width: 100%;
      padding: 10px;
      margin: 5px 0;
      font-size: 16px;
      cursor: pointer;
      border: 1px solid #ccc;
      background: #f0f0f0;
    }
    .options button:hover {
      background: #e0e0e0;
    }
    .feedback {
      margin-top: 10px;
      font-weight: bold;
    }
    .feedback.correct {
      color: green;
    }
    .feedback.wrong {
      color: red;
    }
  </style>
</head>
<body>
  <h1>Interactive Quiz</h1>
  <div id="quiz"></div>

  <script>
    // Hardcoded quiz content
    const xTxtContent = `
HS&E test download for operatives and specialistsGeneral responsibilitiesQuestionWho is responsible for reporting any unsafeconditions on site?A) The site manager onlyB) The clientC) Health and Safety Executive (HSE)inspectorsD) Everyone on siteThe correct answer is D.1HS&E test download for operatives and specialistsGeneral responsibilitiesQuestionDuring site induction you do not understandsomething the presenter says. What should youdo?A) Attend another site inductionB) Ask the presenter to explain the point againC) Guess what the presenter was trying to tellyouD) Wait until the end then ask someone else toexplainThe correct answer is B.2
`;

    let currentQuestionIndex = 0;

    // Parse questions from the hardcoded string
    function parseQuestions(text) {
      const lines = text.split('\n');
      const questions = [];
      let currentQuestion = null;

      for (let line of lines) {
        line = line.trim();

        // Start a new question
        if (line.startsWith("Question")) {
          if (currentQuestion) {
            questions.push(currentQuestion);
          }
          currentQuestion = {
            question: "",
            options: [],
            correctAnswer: ""
          };

          // Extract the full question text
          currentQuestion.question = line.replace(/^[^:]+:\s*/, "").trim();
        }

        // Add options
        else if (line.startsWith("A)") || line.startsWith("B)") || line.startsWith("C)") || line.startsWith("D)")) {
          const optionText = line.replace(/^[A-D]\)/, "").trim();
          currentQuestion.options.push(optionText);
        }

        // Extract the correct answer
        else if (line.startsWith("The correct answer is ")) {
          const answer = line.replace("The correct answer is ", "").trim().toUpperCase();
          currentQuestion.correctAnswer = answer;
        }
      }

      // Push the last question
      if (currentQuestion) {
        questions.push(currentQuestion);
      }

      return questions;
    }

    // Display the current question
    function displayQuestion(index) {
      const quizDiv = document.getElementById('quiz');
      quizDiv.innerHTML = "";

      const question = questions[index];
      const container = document.createElement('div');
      container.className = 'question-container';

      // Display the question title
      const title = document.createElement('div');
      title.className = 'question-title';
      title.textContent = `Question ${index + 1}: ${question.question}`;
      container.appendChild(title);

      // Display the options as buttons
      const optionsDiv = document.createElement('div');
      optionsDiv.className = 'options';

      question.options.forEach((option, i) => {
        const button = document.createElement('button');
        button.textContent = `${String.fromCharCode(65 + i)}) ${option}`;
        button.addEventListener('click', () => handleAnswer(button, String.fromCharCode(65 + i)));
        optionsDiv.appendChild(button);
      });

      container.appendChild(optionsDiv);

      // Feedback area
      const feedback = document.createElement('div');
      feedback.className = 'feedback';
      container.appendChild(feedback);

      quizDiv.appendChild(container);
    }

    // Handle user's answer
    function handleAnswer(button, selectedAnswer) {
      const q = questions[currentQuestionIndex];

      // Highlight the selected answer
      Array.from(document.querySelectorAll('.options button')).forEach(btn => {
        btn.classList.remove('selected');
      });
      button.classList.add('selected');

      // Provide feedback
      const feedback = document.querySelector('.feedback');
      if (selectedAnswer === q.correctAnswer) {
        feedback.textContent = "Correct!";
        feedback.className = 'feedback correct';
      } else {
        feedback.textContent = `Wrong! The correct answer is ${q.correctAnswer}.`;
        feedback.className = 'feedback wrong';
      }

      // Move to the next question after a delay
      setTimeout(() => {
        if (currentQuestionIndex < questions.length - 1) {
          currentQuestionIndex++;
          displayQuestion(currentQuestionIndex);
        } else {
          showResults();
        }
      }, 1500);
    }

    // Show quiz results
    function showResults() {
      const quizDiv = document.getElementById('quiz');
      quizDiv.innerHTML = `<h2>Quiz Results</h2>`;
      questions.forEach((q, i) => {
        const div = document.createElement('div');
        div.textContent = `Question ${i + 1}: ${q.question} - Correct Answer: ${q.correctAnswer}`;
        quizDiv.appendChild(div);
      });
    }

    // Initialize the quiz
    const questions = parseQuestions(xTxtContent);
    displayQuestion(currentQuestionIndex);
  </script>
</body>
</html>
